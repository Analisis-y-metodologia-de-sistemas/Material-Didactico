<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMS - Clase 7: User Stories y Story Mapping</title>
    <meta name="description" content="User Stories y Story Mapping: técnicas ágiles para capturar requisitos y planificar productos">
    <meta name="keywords" content="user stories, story mapping, requisitos ágiles, INVEST, épicas, criterios aceptación">
    <meta name="author" content="Curso AMS">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        :root {
            /* Colores principales */
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --info-color: #17a2b8;
            
            /* Sistema de colores para modo claro */
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-card: rgba(255, 255, 255, 0.95);
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.1);
            
            /* Gradientes */
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(45deg, #3498db, #2980b9);
        }
        
        [data-theme="dark"] {
            /* Sistema de colores para modo oscuro */
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d3748;
            --bg-card: rgba(26, 26, 26, 0.95);
            --text-primary: #ffffff;
            --text-secondary: #a0aec0;
            --border-color: #4a5568;
            --shadow: rgba(0, 0, 0, 0.3);
            
            /* Gradientes modo oscuro */
            --gradient-primary: linear-gradient(135deg, #232526 0%, #414345 100%);
            --gradient-secondary: linear-gradient(45deg, #2c3e50, #34495e);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--gradient-primary);
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        /* Botón de tema */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px var(--shadow);
        }

        /* Contenedor principal */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Header del curso */
        .course-header {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px var(--shadow);
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .course-title {
            font-size: 2.5em;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px var(--shadow);
        }

        .course-subtitle {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .course-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .meta-card {
            background: var(--gradient-secondary);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .meta-card h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .progress-fill {
            height: 100%;
            background: var(--success-color);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Secciones de contenido */
        .content-section {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px var(--shadow);
            transition: transform 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .content-section:hover {
            transform: translateY(-2px);
        }

        .section-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--secondary-color);
            color: var(--text-primary);
        }

        .section-title::before {
            margin-right: 10px;
        }

        /* Objetivos de aprendizaje */
        .objectives {
            background: linear-gradient(45deg, var(--success-color), #2ecc71);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }

        .objectives h2 {
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .objectives ul {
            list-style: none;
            padding: 0;
        }

        .objectives li {
            background: rgba(255, 255, 255, 0.1);
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
        }

        /* Cajas de contenido */
        .content-box {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary-color);
            border: 1px solid var(--border-color);
        }

        .content-box.warning {
            border-left-color: var(--warning-color);
            background: rgba(243, 156, 18, 0.1);
        }

        .content-box.info {
            border-left-color: var(--info-color);
            background: rgba(23, 162, 184, 0.1);
        }

        .content-box.success {
            border-left-color: var(--success-color);
            background: rgba(39, 174, 96, 0.1);
        }

        .content-box.danger {
            border-left-color: var(--accent-color);
            background: rgba(231, 76, 60, 0.1);
        }

        /* Diagramas */
        .diagram-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            border: 2px solid var(--border-color);
            overflow: hidden;
        }

        .diagram-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        /* User Stories específico */
        .story-format {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid var(--info-color);
        }

        .story-template {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .story-part {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .story-part:hover {
            transform: translateY(-2px);
            border-color: var(--secondary-color);
        }

        .story-part.como {
            border-color: var(--success-color);
            background: rgba(39, 174, 96, 0.1);
        }

        .story-part.quiero {
            border-color: var(--warning-color);
            background: rgba(243, 156, 18, 0.1);
        }

        .story-part.para {
            border-color: var(--info-color);
            background: rgba(23, 162, 184, 0.1);
        }

        /* INVEST criteria */
        .invest-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .invest-card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .invest-card:hover {
            transform: translateY(-2px);
            border-color: var(--success-color);
        }

        .invest-letter {
            font-size: 2em;
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 10px;
        }

        /* Story mapping */
        .story-map {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border-color);
        }

        .backbone {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--info-color);
            border-radius: 10px;
        }

        .backbone-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            color: var(--primary-color);
        }

        .release-section {
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid var(--secondary-color);
        }

        .release-section.release-1 {
            background: rgba(39, 174, 96, 0.1);
            border-left-color: var(--success-color);
        }

        .release-section.release-2 {
            background: rgba(243, 156, 18, 0.1);
            border-left-color: var(--warning-color);
        }

        .release-section.release-3 {
            background: rgba(23, 162, 184, 0.1);
            border-left-color: var(--info-color);
        }

        .story-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }

        .story-card {
            background: #fff3cd;
            border: 1px solid var(--warning-color);
            border-radius: 8px;
            padding: 12px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .story-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        /* Estimación */
        .estimation-scale {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .fibonacci-item {
            background: var(--bg-card);
            border: 2px solid var(--secondary-color);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            color: var(--secondary-color);
            transition: all 0.3s ease;
        }

        .fibonacci-item:hover {
            background: var(--secondary-color);
            color: white;
            transform: scale(1.1);
        }

        /* Comparación tabla */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--bg-card);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table th {
            background: var(--gradient-secondary);
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        .comparison-table tr:hover {
            background: rgba(52, 152, 219, 0.1);
        }

        /* Quiz */
        .quiz-container {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            border: 1px solid var(--border-color);
        }

        .quiz-container h2 {
            color: var(--primary-color);
            margin-bottom: 30px;
            text-align: center;
        }

        .question {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary-color);
            border: 1px solid var(--border-color);
        }

        .question h4 {
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            list-style: none;
            padding: 0;
        }

        .options li {
            background: var(--bg-card);
            margin: 8px 0;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .options li:hover {
            background: var(--secondary-color);
            color: white;
            transform: translateX(5px);
        }

        .options li.selected {
            background: var(--success-color);
            color: white;
        }

        .options li.correct {
            background: var(--success-color);
            color: white;
        }

        .options li.incorrect {
            background: var(--accent-color);
            color: white;
        }

        /* Resultados del quiz */
        .quiz-results {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid var(--border-color);
            display: none;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.5em;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: var(--success-color); }
        .score-good { background: var(--info-color); }
        .score-fair { background: var(--warning-color); }
        .score-poor { background: var(--accent-color); }

        /* Botones */
        .btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
        }

        .btn-primary { background: var(--secondary-color); }
        .btn-success { background: var(--success-color); }
        .btn-warning { background: var(--warning-color); }
        .btn-danger { background: var(--accent-color); }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .course-title {
                font-size: 2em;
            }
            
            .story-template {
                grid-template-columns: 1fr;
            }
            
            .invest-grid {
                grid-template-columns: 1fr;
            }
            
            .estimation-scale {
                justify-content: center;
            }
        }

        /* Animaciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Accesibilidad */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Focus states */
        button:focus,
        .options li:focus {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Botón cambio de tema -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Cambiar tema">
        <span id="theme-icon">🌓</span>
    </button>

    <div class="container">
        <!-- Header del curso -->
        <header class="course-header">
            <h1 class="course-title">📝 Clase 7: User Stories y Story Mapping</h1>
            <p class="course-subtitle">Técnicas ágiles para capturar requisitos de usuario y planificar productos</p>
            
            <div class="course-meta">
                <div class="meta-card">
                    <h4>📚 Curso</h4>
                    <p>Análisis y Metodología de Sistemas</p>
                </div>
                <div class="meta-card">
                    <h4>📊 Progreso</h4>
                    <p>Clase 7 de 16</p>
                </div>
                <div class="meta-card">
                    <h4>⏱️ Duración</h4>
                    <p>3 horas académicas</p>
                </div>
                <div class="meta-card">
                    <h4>🎯 Nivel</h4>
                    <p>Intermedio</p>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" style="width: 43.75%"></div>
            </div>
        </header>

        <!-- Objetivos de aprendizaje -->
        <section class="objectives">
            <h2>🎯 Objetivos de Aprendizaje</h2>
            <ul>
                <li><strong>Dominar la técnica de user stories</strong> para capturar requisitos de manera ágil y centrada en el usuario</li>
                <li><strong>Comprender el story mapping</strong> como herramienta de planificación y visualización del producto</li>
                <li><strong>Analizar técnicas de estimación ágil</strong> incluyendo story points y planning poker</li>
                <li><strong>Aplicar criterios INVEST</strong> para evaluar la calidad de las user stories</li>
                <li><strong>Implementar técnicas de priorización</strong> y planificación de releases</li>
                <li><strong>Desarrollar habilidades de facilitación</strong> en workshops de story mapping</li>
            </ul>
        </section>

        <!-- Contenido principal -->
        <section class="content-section">
            <h2 class="section-title">📝 1. Fundamentos de User Stories</h2>
            
            <div class="content-box info">
                <h3>📖 Definición</h3>
                <p><strong>User Story (Historia de Usuario):</strong> Una descripción corta y simple de una característica del software escrita desde la perspectiva de la persona que desea la nueva capacidad, generalmente un usuario o cliente del sistema.</p>
            </div>

            <div class="story-format">
                <h3>📝 Formato Estándar de User Story</h3>
                
                <div class="story-template">
                    <div class="story-part como">
                        <h4>👤 COMO</h4>
                        <p><strong>[Tipo de usuario]</strong></p>
                        <p>Define quién es el usuario</p>
                    </div>
                    
                    <div class="story-part quiero">
                        <h4>💭 QUIERO</h4>
                        <p><strong>[Acción/Función]</strong></p>
                        <p>Describe qué quiere hacer</p>
                    </div>
                    
                    <div class="story-part para">
                        <h4>🎯 PARA QUE</h4>
                        <p><strong>[Beneficio/Valor]</strong></p>
                        <p>Explica el valor obtenido</p>
                    </div>
                </div>
            </div>

            <div class="content-box success">
                <h3>💡 Ejemplo de User Story</h3>
                <p><strong>Como</strong> cliente de un e-commerce, <strong>quiero</strong> filtrar productos por precio <strong>para que</strong> pueda encontrar artículos dentro de mi presupuesto.</p>
                
                <h4>📋 Criterios de Aceptación:</h4>
                <ul>
                    <li><strong>Dado que</strong> estoy en la página de productos, <strong>cuando</strong> selecciono un rango de precios, <strong>entonces</strong> solo se muestran productos dentro de ese rango</li>
                    <li><strong>Dado que</strong> he aplicado un filtro de precio, <strong>cuando</strong> agrego un producto al carrito, <strong>entonces</strong> el filtro se mantiene activo</li>
                    <li><strong>Dado que</strong> no hay productos en el rango seleccionado, <strong>cuando</strong> aplico el filtro, <strong>entonces</strong> se muestra un mensaje informativo</li>
                </ul>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">🔄 User Stories vs Requisitos Tradicionales</div>
                <div class="mermaid">
                    graph TB
                        A[Requisitos Tradicionales] --> A1[Especificaciones detalladas]
                        A --> A2[Lenguaje técnico]
                        A --> A3[Documentación extensa]
                        A --> A4[Difícil de cambiar]
                        
                        B[User Stories] --> B1[Descripciones conversacionales]
                        B --> B2[Lenguaje natural]
                        B --> B3[Documentación mínima]
                        B --> B4[Fácil adaptación]
                        
                        style A fill:#ffebee
                        style B fill:#e8f5e8
                        style A1 fill:#ffcdd2
                        style A2 fill:#ffcdd2
                        style A3 fill:#ffcdd2
                        style A4 fill:#ffcdd2
                        style B1 fill:#c8e6c8
                        style B2 fill:#c8e6c8
                        style B3 fill:#c8e6c8
                        style B4 fill:#c8e6c8
                </div>
            </div>
        </section>

        <section class="content-section">
            <h2 class="section-title">⭐ 2. Criterios INVEST</h2>
            
            <div class="content-box">
                <p>Los criterios <strong>INVEST</strong> fueron introducidos por Bill Wake como una forma de evaluar la calidad de las user stories. Cada letra representa una característica esencial:</p>
            </div>

            <div class="invest-grid">
                <div class="invest-card">
                    <div class="invest-letter">I</div>
                    <h4>Independent</h4>
                    <p><strong>Independiente</strong></p>
                    <p>La story puede desarrollarse sin depender de otras stories, permitiendo flexibilidad en la planificación.</p>
                </div>
                
                <div class="invest-card">
                    <div class="invest-letter">N</div>
                    <h4>Negotiable</h4>
                    <p><strong>Negociable</strong></p>
                    <p>Los detalles pueden discutirse y ajustarse durante el desarrollo, manteniendo flexibilidad.</p>
                </div>
                
                <div class="invest-card">
                    <div class="invest-letter">V</div>
                    <h4>Valuable</h4>
                    <p><strong>Valiosa</strong></p>
                    <p>Aporta valor claro al usuario final o al negocio, justificando el esfuerzo de desarrollo.</p>
                </div>
                
                <div class="invest-card">
                    <div class="invest-letter">E</div>
                    <h4>Estimable</h4>
                    <p><strong>Estimable</strong></p>
                    <p>El equipo puede estimar razonablemente el esfuerzo necesario para completar la story.</p>
                </div>
                
                <div class="invest-card">
                    <div class="invest-letter">S</div>
                    <h4>Small</h4>
                    <p><strong>Pequeña</strong></p>
                    <p>Puede completarse dentro de un sprint, permitiendo entregas frecuentes.</p>
                </div>
                
                <div class="invest-card">
                    <div class="invest-letter">T</div>
                    <h4>Testable</h4>
                    <p><strong>Testeable</strong></p>
                    <p>Incluye criterios claros que permiten verificar si se cumplieron los requisitos.</p>
                </div>
            </div>

            <div class="content-box warning">
                <h3>⚠️ Señales de Alerta en User Stories</h3>
                <ul>
                    <li><strong>Muy técnica:</strong> "Como desarrollador, quiero usar PostgreSQL..."</li>
                    <li><strong>Muy grande:</strong> "Como usuario, quiero un sistema completo de CRM..."</li>
                    <li><strong>Sin valor claro:</strong> "Como usuario, quiero hacer login para hacer login"</li>
                    <li><strong>No testeable:</strong> "Como usuario, quiero una interfaz bonita"</li>
                </ul>
            </div>
        </section>

        <section class="content-section">
            <h2 class="section-title">📊 3. Jerarquía de User Stories</h2>
            
            <div class="diagram-container">
                <div class="diagram-title">🏗️ Niveles de Detalle</div>
                <div class="mermaid">
                    graph TD
                        A[Epic: Gestión de Usuarios<br/>3-6 meses<br/>200-500 puntos] --> B[Feature: Autenticación<br/>2-4 sprints<br/>50-100 puntos]
                        A --> C[Feature: Perfil de Usuario<br/>2-3 sprints<br/>40-80 puntos]
                        
                        B --> D[Story: Registro<br/>1-2 sprints<br/>8-13 puntos]
                        B --> E[Story: Login<br/>1 sprint<br/>5-8 puntos]
                        B --> F[Story: Logout<br/>1 sprint<br/>3-5 puntos]
                        
                        D --> G[Task: Validar email<br/>2-4 horas]
                        D --> H[Task: Crear BD<br/>4-6 horas]
                        D --> I[Task: UI formulario<br/>3-5 horas]
                        
                        style A fill:#667eea,color:#fff
                        style B fill:#4facfe,color:#fff
                        style C fill:#4facfe,color:#fff
                        style D fill:#ffeaa7
                        style E fill:#ffeaa7
                        style F fill:#ffeaa7
                        style G fill:#fab1a0
                        style H fill:#fab1a0
                        style I fill:#fab1a0
                </div>
            </div>

            <div class="content-box">
                <h3>📝 Definiciones por Nivel</h3>
                <ul>
                    <li><strong>Épicas:</strong> Objetivos de alto nivel que requieren múltiples releases</li>
                    <li><strong>Features:</strong> Conjuntos de funcionalidades relacionadas</li>
                    <li><strong>User Stories:</strong> Funcionalidades específicas completables en 1-2 sprints</li>
                    <li><strong>Tasks:</strong> Actividades técnicas para implementar una story</li>
                </ul>
            </div>
        </section>

        <section class="content-section">
            <h2 class="section-title">🗺️ 4. Story Mapping</h2>
            
            <div class="content-box info">
                <h3>🎯 ¿Qué es Story Mapping?</h3>
                <p>Una técnica visual de planificación que organiza user stories en un mapa bidimensional, mostrando el flujo de actividades del usuario (backbone) y las prioridades de implementación (releases).</p>
            </div>

            <div class="story-map">
                <h3>🏗️ Estructura del Story Map</h3>
                
                <h4>📋 Backbone (Actividades Principales)</h4>
                <div class="backbone">
                    <div class="backbone-item">Descubrir<br/>Productos</div>
                    <div class="backbone-item">Evaluar<br/>Opciones</div>
                    <div class="backbone-item">Realizar<br/>Compra</div>
                    <div class="backbone-item">Recibir<br/>Producto</div>
                    <div class="backbone-item">Gestionar<br/>Post-venta</div>
                </div>

                <div class="release-section release-1">
                    <h4>🚀 Release 1 - MVP (Walking Skeleton)</h4>
                    <div class="story-cards">
                        <div class="story-card">Buscar productos básico</div>
                        <div class="story-card">Ver detalles producto</div>
                        <div class="story-card">Agregar al carrito</div>
                        <div class="story-card">Checkout simple</div>
                        <div class="story-card">Confirmar pedido</div>
                    </div>
                </div>

                <div class="release-section release-2">
                    <h4>⭐ Release 2 - Funcionalidades Clave</h4>
                    <div class="story-cards">
                        <div class="story-card">Filtros avanzados</div>
                        <div class="story-card">Comparar productos</div>
                        <div class="story-card">Wishlist</div>
                        <div class="story-card">Múltiples pagos</div>
                        <div class="story-card">Tracking pedido</div>
                    </div>
                </div>

                <div class="release-section release-3">
                    <h4>🎨 Release 3 - Mejoras y Optimizaciones</h4>
                    <div class="story-cards">
                        <div class="story-card">Recomendaciones IA</div>
                        <div class="story-card">Reviews y ratings</div>
                        <div class="story-card">Programa lealtad</div>
                        <div class="story-card">Chat soporte</div>
                        <div class="story-card">Devoluciones</div>
                    </div>
                </div>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">🔄 Proceso de Story Mapping</div>
                <div class="mermaid">
                    flowchart LR
                        A[Identificar Usuarios] --> B[Mapear Journey]
                        B --> C[Crear Backbone]
                        C --> D[Agregar Stories]
                        D --> E[Priorizar Releases]
                        E --> F[Validar con Usuarios]
                        F --> G[Iterar y Refinar]
                        
                        style A fill:#e8f5e8
                        style B fill:#fff3e0
                        style C fill:#e3f2fd
                        style D fill:#f3e5f5
                        style E fill:#fff8e1
                        style F fill:#fce4ec
                        style G fill:#e1f5fe
                </div>
            </div>
        </section>

        <section class="content-section">
            <h2 class="section-title">📏 5. Estimación con Story Points</h2>
            
            <div class="content-box">
                <h3>🔢 ¿Qué son los Story Points?</h3>
                <p>Una unidad de medida relativa que considera <strong>complejidad</strong>, <strong>esfuerzo</strong> y <strong>riesgo</strong> de una user story, usando la secuencia de Fibonacci para reflejar la incertidumbre natural en las estimaciones.</p>
            </div>

            <div class="estimation-scale">
                <div class="fibonacci-item">1</div>
                <div class="fibonacci-item">2</div>
                <div class="fibonacci-item">3</div>
                <div class="fibonacci-item">5</div>
                <div class="fibonacci-item">8</div>
                <div class="fibonacci-item">13</div>
                <div class="fibonacci-item">21</div>
                <div class="fibonacci-item">?</div>
            </div>

            <div class="content-box success">
                <h3>🎯 Planning Poker</h3>
                <p>Técnica colaborativa de estimación donde cada miembro del equipo:</p>
                <ol>
                    <li>Escucha la descripción de la story</li>
                    <li>Hace preguntas para clarificar</li>
                    <li>Estima individualmente en secreto</li>
                    <li>Revela estimaciones simultáneamente</li>
                    <li>Discute diferencias y re-estima si es necesario</li>
                </ol>
            </div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Story Points</th>
                        <th>Complejidad</th>
                        <th>Ejemplo</th>
                        <th>Tiempo Estimado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>1-2</strong></td>
                        <td>Muy Simple</td>
                        <td>Cambiar texto de botón</td>
                        <td>2-4 horas</td>
                    </tr>
                    <tr>
                        <td><strong>3-5</strong></td>
                        <td>Simple</td>
                        <td>Formulario básico</td>
                        <td>1-2 días</td>
                    </tr>
                    <tr>
                        <td><strong>8</strong></td>
                        <td>Moderada</td>
                        <td>Integración con API</td>
                        <td>3-5 días</td>
                    </tr>
                    <tr>
                        <td><strong>13</strong></td>
                        <td>Compleja</td>
                        <td>Sistema de notificaciones</td>
                        <td>1-2 semanas</td>
                    </tr>
                    <tr>
                        <td><strong>21+</strong></td>
                        <td>Muy Compleja</td>
                        <td>Necesita dividirse</td>
                        <td>Épica o Feature</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="content-section">
            <h2 class="section-title">🔄 6. Refinamiento y Splitting</h2>
            
            <div class="content-box warning">
                <h3>✂️ Técnicas para Dividir User Stories</h3>
                
                <h4>🎯 Por Criterios de Aceptación</h4>
                <p><strong>Original:</strong> "Como usuario, quiero buscar productos"</p>
                <p><strong>División:</strong></p>
                <ul>
                    <li>Buscar por nombre</li>
                    <li>Buscar por categoría</li>
                    <li>Buscar por precio</li>
                </ul>

                <h4>👥 Por Tipo de Usuario</h4>
                <p><strong>Original:</strong> "Como usuario, quiero ver reportes"</p>
                <p><strong>División:</strong></p>
                <ul>
                    <li>Como admin, ver todos los reportes</li>
                    <li>Como manager, ver reportes de mi equipo</li>
                    <li>Como empleado, ver mis reportes</li>
                </ul>

                <h4>🔄 Por Flujo de Trabajo</h4>
                <p><strong>Original:</strong> "Como usuario, quiero hacer una compra"</p>
                <p><strong>División:</strong></p>
                <ul>
                    <li>Agregar productos al carrito</li>
                    <li>Revisar carrito</li>
                    <li>Procesar pago</li>
                    <li>Confirmar pedido</li>
                </ul>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">🔍 Proceso de Refinamiento</div>
                <div class="mermaid">
                    graph LR
                        A[Story Grande] --> B{¿Es INVEST?}
                        B -->|No| C[Aplicar Técnica Splitting]
                        C --> D[Stories Más Pequeñas]
                        D --> B
                        B -->|Sí| E[Story Lista para Sprint]
                        
                        F[Clarificar Criterios] --> B
                        G[Remover Dependencias] --> B
                        H[Validar Valor] --> B
                        
                        style A fill:#ffebee
                        style E fill:#e8f5e8
                        style C fill:#fff3e0
                        style D fill:#e3f2fd
                </div>
            </div>
        </section>

        <!-- Quiz de evaluación -->
        <section class="quiz-container">
            <h2>🧠 Evaluación de Conocimientos - 20 Preguntas</h2>
            <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">
                Responde todas las preguntas para evaluar tu comprensión de User Stories y Story Mapping
            </p>
            
            <div id="quiz-questions">
                <div class="question">
                    <h4>1. ¿Cuál es el formato estándar de una User Story?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Qué, Por qué, Cómo</li>
                        <li onclick="selectOption(this, true)">B) Como [usuario], quiero [acción], para que [beneficio]</li>
                        <li onclick="selectOption(this, false)">C) Dado que, cuando, entonces</li>
                        <li onclick="selectOption(this, false)">D) Requisito, Solución, Validación</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>2. ¿Qué significa la "I" en los criterios INVEST?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, true)">A) Independent (Independiente)</li>
                        <li onclick="selectOption(this, false)">B) Iterative (Iterativo)</li>
                        <li onclick="selectOption(this, false)">C) Integrated (Integrado)</li>
                        <li onclick="selectOption(this, false)">D) Innovative (Innovador)</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>3. ¿Cuál es el objetivo principal del Story Mapping?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Documentar todos los requisitos</li>
                        <li onclick="selectOption(this, true)">B) Visualizar el journey del usuario y planificar releases</li>
                        <li onclick="selectOption(this, false)">C) Estimar el tiempo de desarrollo</li>
                        <li onclick="selectOption(this, false)">D) Asignar tareas al equipo</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>4. ¿Qué son los Story Points?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Puntos de calidad del código</li>
                        <li onclick="selectOption(this, true)">B) Unidad de medida relativa de complejidad, esfuerzo y riesgo</li>
                        <li onclick="selectOption(this, false)">C) Número de líneas de código</li>
                        <li onclick="selectOption(this, false)">D) Horas exactas de desarrollo</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>5. ¿Cuál es la secuencia más común para estimar Story Points?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) 1, 2, 3, 4, 5, 6, 7, 8</li>
                        <li onclick="selectOption(this, true)">B) 1, 2, 3, 5, 8, 13, 21</li>
                        <li onclick="selectOption(this, false)">C) 10, 20, 30, 40, 50</li>
                        <li onclick="selectOption(this, false)">D) S, M, L, XL, XXL</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>6. ¿Qué representa el "backbone" en Story Mapping?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Las stories más importantes</li>
                        <li onclick="selectOption(this, true)">B) El flujo principal de actividades del usuario</li>
                        <li onclick="selectOption(this, false)">C) La arquitectura técnica</li>
                        <li onclick="selectOption(this, false)">D) Los criterios de aceptación</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>7. ¿Cuál es un criterio de aceptación bien formado?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, true)">A) Dado que [contexto], cuando [acción], entonces [resultado]</li>
                        <li onclick="selectOption(this, false)">B) El sistema debe ser rápido</li>
                        <li onclick="selectOption(this, false)">C) Usar tecnología moderna</li>
                        <li onclick="selectOption(this, false)">D) Implementar según buenas prácticas</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>8. ¿Qué significa que una User Story sea "Testeable" (INVEST)?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Que requiere muchas pruebas unitarias</li>
                        <li onclick="selectOption(this, true)">B) Que tiene criterios claros para verificar si se completó</li>
                        <li onclick="selectOption(this, false)">C) Que es fácil de programar</li>
                        <li onclick="selectOption(this, false)">D) Que no tiene bugs</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>9. ¿Cuál es una señal de que una User Story es muy grande?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Tiene muchos criterios de aceptación</li>
                        <li onclick="selectOption(this, false)">B) Requiere más de un sprint para completarse</li>
                        <li onclick="selectOption(this, false)">C) Tiene múltiples responsabilidades</li>
                        <li onclick="selectOption(this, true)">D) Todas las anteriores</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>10. ¿Qué es Planning Poker?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Un juego para el team building</li>
                        <li onclick="selectOption(this, true)">B) Una técnica colaborativa de estimación</li>
                        <li onclick="selectOption(this, false)">C) Una herramienta de planificación</li>
                        <li onclick="selectOption(this, false)">D) Un método de priorización</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>11. ¿Cuál es una diferencia clave entre User Stories y requisitos tradicionales?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, true)">A) User Stories priorizan la conversación sobre documentación</li>
                        <li onclick="selectOption(this, false)">B) User Stories son más técnicas</li>
                        <li onclick="selectOption(this, false)">C) User Stories requieren más detalle</li>
                        <li onclick="selectOption(this, false)">D) User Stories son más rígidas</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>12. ¿Qué es una Épica en el contexto de User Stories?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Una story muy importante</li>
                        <li onclick="selectOption(this, true)">B) Un objetivo de alto nivel que requiere múltiples sprints</li>
                        <li onclick="selectOption(this, false)">C) Una story técnica</li>
                        <li onclick="selectOption(this, false)">D) Una story sin valor de negocio</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>13. ¿Cuál es el primer release típico en Story Mapping?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) El producto completo</li>
                        <li onclick="selectOption(this, true)">B) Walking Skeleton (MVP)</li>
                        <li onclick="selectOption(this, false)">C) Las funcionalidades más complejas</li>
                        <li onclick="selectOption(this, false)">D) Solo la interfaz de usuario</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>14. ¿Qué significa que una story sea "Negociable"?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Que su precio se puede negociar</li>
                        <li onclick="selectOption(this, true)">B) Que los detalles de implementación pueden discutirse</li>
                        <li onclick="selectOption(this, false)">C) Que puede cancelarse fácilmente</li>
                        <li onclick="selectOption(this, false)">D) Que puede cambiarse por completo</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>15. ¿Cuál es una técnica para dividir User Stories?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Por complejidad técnica</li>
                        <li onclick="selectOption(this, false)">B) Por tipo de usuario</li>
                        <li onclick="selectOption(this, false)">C) Por flujo de trabajo</li>
                        <li onclick="selectOption(this, true)">D) Todas las anteriores</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>16. ¿Qué es la "Definition of Done"?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Los criterios específicos de una story</li>
                        <li onclick="selectOption(this, true)">B) Criterios generales que se aplican a todas las stories</li>
                        <li onclick="selectOption(this, false)">C) La fecha límite del sprint</li>
                        <li onclick="selectOption(this, false)">D) La estimación final de la story</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>17. ¿Cuándo es apropiado usar una story de más de 13 puntos?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Cuando el equipo es muy experimentado</li>
                        <li onclick="selectOption(this, false)">B) En sprints largos</li>
                        <li onclick="selectOption(this, true)">C) Nunca, debe dividirse</li>
                        <li onclick="selectOption(this, false)">D) Solo en casos especiales</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>18. ¿Qué ventaja principal ofrece el formato "Como... quiero... para que..."?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Es más técnico</li>
                        <li onclick="selectOption(this, true)">B) Enfoca en el usuario y el valor</li>
                        <li onclick="selectOption(this, false)">C) Es más rápido de escribir</li>
                        <li onclick="selectOption(this, false)">D) Requiere menos detalles</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>19. ¿Cuál es el objetivo del refinamiento de User Stories?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Aumentar la estimación</li>
                        <li onclick="selectOption(this, true)">B) Mejorar claridad, precisión y estimabilidad</li>
                        <li onclick="selectOption(this, false)">C) Reducir el número de stories</li>
                        <li onclick="selectOption(this, false)">D) Asignar responsables</li>
                    </ul>
                </div>

                <div class="question">
                    <h4>20. ¿Quién debería participar en la creación de User Stories?</h4>
                    <ul class="options">
                        <li onclick="selectOption(this, false)">A) Solo el Product Owner</li>
                        <li onclick="selectOption(this, false)">B) Solo el equipo de desarrollo</li>
                        <li onclick="selectOption(this, false)">C) Solo los stakeholders</li>
                        <li onclick="selectOption(this, true)">D) Colaboración entre PO, equipo y stakeholders</li>
                    </ul>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <button class="btn btn-primary" onclick="submitQuiz()">📊 Evaluar Respuestas</button>
                <button class="btn btn-warning" onclick="resetQuiz()">🔄 Reiniciar Quiz</button>
            </div>

            <div id="quiz-results" class="quiz-results">
                <div id="score-circle" class="score-circle">
                    <span id="score-percentage">0%</span>
                </div>
                <h3 id="score-message">¡Excelente trabajo!</h3>
                <p id="score-details">Has respondido correctamente X de 20 preguntas.</p>
                <div id="score-feedback"></div>
            </div>
        </section>
    </div>

    <script>
        // Sistema de temas
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            
            if (body.getAttribute('data-theme') === 'dark') {
                body.removeAttribute('data-theme');
                themeIcon.textContent = '🌓';
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                themeIcon.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Cargar tema guardado
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            const themeIcon = document.getElementById('theme-icon');
            
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                themeIcon.textContent = '☀️';
            }
            
            // Inicializar Mermaid
            mermaid.initialize({ 
                startOnLoad: true,
                theme: savedTheme === 'dark' ? 'dark' : 'default'
            });
        });

        // Sistema de Quiz
        let selectedAnswers = {};
        let totalQuestions = 20;

        function selectOption(element, isCorrect) {
            const question = element.closest('.question');
            const questionNumber = Array.from(document.querySelectorAll('.question')).indexOf(question) + 1;
            const options = question.querySelectorAll('.options li');
            
            // Remover selección previa
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Marcar nueva selección
            element.classList.add('selected');
            
            // Guardar respuesta
            selectedAnswers[questionNumber] = {
                selected: element,
                isCorrect: isCorrect
            };
        }

        function submitQuiz() {
            if (Object.keys(selectedAnswers).length < totalQuestions) {
                alert('Por favor responde todas las preguntas antes de evaluar.');
                return;
            }

            let correctAnswers = 0;
            
            // Evaluar cada respuesta
            Object.values(selectedAnswers).forEach(answer => {
                if (answer.isCorrect) {
                    answer.selected.classList.add('correct');
                    correctAnswers++;
                } else {
                    answer.selected.classList.add('incorrect');
                }
            });

            // Mostrar respuestas correctas
            document.querySelectorAll('.question').forEach((question, index) => {
                const options = question.querySelectorAll('.options li');
                options.forEach(option => {
                    const isCorrect = option.getAttribute('onclick').includes('true');
                    if (isCorrect && !option.classList.contains('selected')) {
                        option.style.backgroundColor = '#27ae60';
                        option.style.color = 'white';
                        option.style.fontWeight = 'bold';
                    }
                });
            });

            // Mostrar resultados
            showResults(correctAnswers);
        }

        function showResults(correctAnswers) {
            const percentage = Math.round((correctAnswers / totalQuestions) * 100);
            const resultsDiv = document.getElementById('quiz-results');
            const scoreCircle = document.getElementById('score-circle');
            const scorePercentage = document.getElementById('score-percentage');
            const scoreMessage = document.getElementById('score-message');
            const scoreDetails = document.getElementById('score-details');
            const scoreFeedback = document.getElementById('score-feedback');

            scorePercentage.textContent = percentage + '%';
            scoreDetails.textContent = `Has respondido correctamente ${correctAnswers} de ${totalQuestions} preguntas.`;

            // Determinar clase y mensaje según el puntaje
            scoreCircle.className = 'score-circle';
            if (percentage >= 90) {
                scoreCircle.classList.add('score-excellent');
                scoreMessage.textContent = '¡Excelente dominio de User Stories!';
                scoreFeedback.innerHTML = '<p>Tienes un entendimiento excepcional de las técnicas ágiles de requisitos. ¡Felicitaciones!</p>';
            } else if (percentage >= 75) {
                scoreCircle.classList.add('score-good');
                scoreMessage.textContent = '¡Buen conocimiento!';
                scoreFeedback.innerHTML = '<p>Tienes una comprensión sólida de User Stories y Story Mapping. Revisa los temas donde tuviste dificultades.</p>';
            } else if (percentage >= 60) {
                scoreCircle.classList.add('score-fair');
                scoreMessage.textContent = 'Conocimiento básico';
                scoreFeedback.innerHTML = '<p>Tienes conceptos básicos. Te recomendamos repasar el material y practicar más con ejemplos.</p>';
            } else {
                scoreCircle.classList.add('score-poor');
                scoreMessage.textContent = 'Necesitas reforzar';
                scoreFeedback.innerHTML = '<p>Te recomendamos revisar todo el material nuevamente y consultar recursos adicionales sobre metodologías ágiles.</p>';
            }

            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function resetQuiz() {
            selectedAnswers = {};
            
            // Limpiar todas las selecciones y estilos
            document.querySelectorAll('.options li').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
                option.style.backgroundColor = '';
                option.style.color = '';
                option.style.fontWeight = '';
            });
            
            // Ocultar resultados
            document.getElementById('quiz-results').style.display = 'none';
            
            // Volver al inicio del quiz
            document.querySelector('.quiz-container h2').scrollIntoView({ behavior: 'smooth' });
        }

        // Navegación suave
        document.addEventListener('DOMContentLoaded', function() {
            // Smooth scrolling para anchors
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>
</html>